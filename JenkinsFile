
pipeline {

    agent any
    
    stages {
		

		stage('Installing Packages'){

			
			steps{

				echo '************** Installing requirements ************************'
				sh 'pip install -r requirements.txt'
				sh 'exit(1)'
			}

		}

		stage('Static Code Checking') {
			when {
              			expression {
                		currentBuild.currentResult == 'FAILURE' 
              			}
			}
            steps {
                script {
                    sh 'find . -name \\*.py | xargs pylint -f parseable | tee pylint.log'
                }
            }
        }

 		stage('Test') {
		
			steps {
				
				echo '******************* Test Msg **********************************'
				sh 'pytest'
			}
		}       
    		
    }
}
